# Configures builds for all branches and deployment on the "prod" branch.

language: node_js
node_js: node

addons:
  apt:
    packages:
      # Ubuntu 16+ does not install this Cypress dependency by default, so we need to install it ourselves
      - libgconf-2-4

cache:
  directories:
    # Cache the folder with the Cypress binary
    - ~/.cache

install: npm ci
script: npm run test:all && npm run build

deploy:
  provider: firebase
  skip-cleanup: true
  on:
    branch: prod
  token:
    secure: VhWpSxiOAVApTnwvpfQziCWUXNcDrEVWVjsm50qnVApvDWqB+3yG+JdpALMrL/mqGwxRfewCR+UyaQ6dXTe4jn6wa8sO8RbpFqbmgtH5vzAObFTANkD9934IxTWmJE28I/gxeVhPYiN9xQNRhXkkkpxMDFRcstKfNGGSm9lqOCAV4GZjdl8y4iTPr6xUYow+XjTVrN+DLkmsqkndd5qHP23LXALqRevpNONnramJshKP0sR9t4FTwUE2aaRsXIdoj796NoINNd8f5qsfpM504546TuWpmyaL8HpibBUNnHSJydxXUGdVJpeVaZhDbhIp+Rm1AE7plDFjxQtRPw57x51vKxbje7j36UGS5Cwx6iT4uRb0LW3OFC64eTKucdMargmj4pZtgFU2Ke/yldghZsXsX2if3JhBCQS8kKabzOIcdt4EF1KdFeZVwCvA4zxQ7BSLJihR+yd5yBxqU4eZdzg/uWIbZ7nLAQTja3Hv4XgEfvb08/t/+uFjjypDBu5ZZsVR9W51aQtSceMBiksjNN+xV5awce2p5z41lSkJ2dS4PSBRL2QhAtMNKr41NEUFCpAJOuQAXgyl0sWZLgv5Ir8XH0MLWT824vZV9nmjd+hlWqHimk+TanRXfc76xKWXl7OIamQ/dK6lirTxgEftUzN/6ybOefIit2Bc8VI6mFQ=
    